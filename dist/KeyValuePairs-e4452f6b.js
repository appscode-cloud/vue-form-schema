"use strict";var e=require("./entry-238d3817.js"),a=require("./tabs-6f856156.js"),r=require("./size-0b1802de.js");require("vue");var t={name:"key-value-pairs",props:{schema:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}},errors:{type:Array,default:function(){return[]}},isLastChild:{type:Boolean,default:!1}},components:{KeyValuePairItems:function(){return Promise.resolve().then((function(){return require("./KeyValuePairItems-6eb46af5.js")})).then((function(e){return e.default}))}},mixins:[e.m,a.t,e.v,r.s],data:function(){return{newData:null,updatePass:0,keyValueArray:null,referencekeyValueArray:null,newKey:"",newValue:null}},computed:{additionalProperties:function(){return this.schema.additionalProperties||{}}},methods:{initKeyValueArray:function(){var e=this;this.keyValueArray=Object.keys(this.value).map((function(a){return{key:a,value:e.value[a]||null}}))},initReferenceKeyValueArray:function(){var e=this;this.referencekeyValueArray=Object.keys(this.referenceModel).map((function(a){return{key:a,value:e.referenceModel[a]||null}}))},updateKeyValueArray:function(e){this.keyValueArray=Object.keys(e).map((function(a){return{key:a,value:e[a]}}))},reconstructObject:function(a){var r={};return a.forEach((function(a){r=Object.assign({},e.j({},r),e.k({},"".concat(a.key),a.value))})),r},addProp:function(){var a=this;return e.i(e.r.mark((function r(){var t;return e.r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(a.schema.title.replace(/ /g,"-"),"-new"),e.next=3,a.$refs[t].validate();case 3:e.sent&&(a.keyValueArray.push({key:a.newKey,value:a.newValue}),a.newKey="",a.newValue=null,a.updatePass+=1);case 5:case"end":return e.stop()}}),r)})))()},deleteProp:function(e){this.$delete(this.keyValueArray,e),this.updatePass+=1}},watch:{keyValueArray:{immediate:!0,deep:!0,handler:function(e,a){null!=a&&(this.modelData=this.reconstructObject(e))}},activeTab:function(){this.initKeyValueArray(),this.initReferenceKeyValueArray()},value:{deep:!0,immediate:!0,handler:function(e,a){JSON.stringify(e)!==JSON.stringify(a)&&this.initKeyValueArray(),this.initReferenceKeyValueArray()}}}},i=e.n({render:function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("validation-observer",{key:e.updatePass,ref:e.schema.title.replace(/ /g,"-")+"-observer",staticClass:"ac-nested-elements key-value-pairs",class:{"stop-line":e.isLastChild},attrs:{tag:"div",vid:e.schema.title.replace(/ /g,"-")+"-observer"},scopedSlots:e._u([{key:"default",fn:function(a){var t=a.errors;return[r("div",{staticClass:"nested-header mb-5"},[r("h6",{staticClass:"is-flex is-semi-normal"},[r("div",{staticClass:"collaps-icon is-disabled"},[r("i",{staticClass:"fa fa-minus",attrs:{"aria-hidden":"true"}})]),e._v("\n      "+e._s(e.schema.title||"Array Item Description")),e._v(" "),r("component-errors",{attrs:{errors:e.errors.concat(e.calcObserverError(t))}})],1),e._v(" "),r("tabs",{model:{value:e.activeTab,callback:function(a){e.activeTab=a},expression:"activeTab"}})],1),e._v(" "),"form"===e.activeTab?[e._l(e.keyValueArray,(function(a,t){return r("div",{key:t+"-"+e.schema.title+"-form"},[r("key-value-pair-items",{attrs:{"reference-model":e.referencekeyValueArray[t]||{},index:t,schema:e.schema,additionalProperties:e.additionalProperties},on:{"delete-key-value":e.deleteProp},model:{value:e.keyValueArray[t],callback:function(a){e.$set(e.keyValueArray,t,a)},expression:"keyValueArray[index]"}})],1)})),e._v(" "),r("validation-observer",{ref:e.schema.title.replace(/ /g,"-")+"-new",staticClass:"key-value-save",attrs:{vid:e.schema.title.replace(/ /g,"-")+"-new-observer",disabled:!0,tag:"div"}},[r("validation-provider",{attrs:{vid:e.schema.title.replace(/ /g,"-")+"-key-provider",rules:"required",name:e.schema.title.replace(/ /g,"-")+"-key",tag:"div"},scopedSlots:e._u([{key:"default",fn:function(a){return[r("simple-input",{attrs:{schema:{title:"Key",type:"string",ui:{tag:"input",type:"text"}},type:"string",validationOb:a,"reference-model":""},model:{value:e.newKey,callback:function(a){e.newKey=a},expression:"newKey"}})]}}],null,!0)}),e._v(" "),"object"===e.additionalProperties.type?[r("validation-provider",{attrs:{rules:"required",name:e.schema.title.replace(/ /g,"-")+"-value",vid:e.schema.title.replace(/ /g,"-")+"-value-provider",slim:""},scopedSlots:e._u([{key:"default",fn:function(a){var t=a.errors;return[r("object-form-wrapper",{attrs:{"is-last-child":!0,isSelfRequired:!0,schema:e.additionalProperties,type:e.additionalProperties.type,errors:t,"reference-model":{}},model:{value:e.newValue,callback:function(a){e.newValue=a},expression:"newValue"}})]}}],null,!0)})]:"key-value-pairs"===e.additionalProperties.type?[r("validation-provider",{attrs:{rules:"required",name:e.schema.title.replace(/ /g,"-")+"-value",vid:e.schema.title.replace(/ /g,"-")+"-value-provider",slim:""},scopedSlots:e._u([{key:"default",fn:function(a){var t=a.errors;return[r("key-value-pairs",{attrs:{"is-last-child":!0,schema:e.additionalProperties,type:e.additionalProperties.type,errors:t,"reference-model":{}},model:{value:e.newValue,callback:function(a){e.newValue=a},expression:"newValue"}})]}}],null,!0)})]:"array"===e.additionalProperties.type?[r("validation-provider",{attrs:{rules:"required",name:e.schema.title.replace(/ /g,"-")+"-value",vid:e.schema.title.replace(/ /g,"-")+"-value-provider",slim:""},scopedSlots:e._u([{key:"default",fn:function(a){var t=a.errors;return[r("array-input",{attrs:{"is-last-child":!0,schema:e.additionalProperties,type:e.additionalProperties.type,errors:t,"reference-model":[]},model:{value:e.newValue,callback:function(a){e.newValue=a},expression:"newValue"}})]}}],null,!0)})]:[r("validation-provider",{attrs:{rules:"required",name:e.schema.title.replace(/ /g,"-")+"-value",vid:e.schema.title.replace(/ /g,"-")+"-value-provider",slim:""},scopedSlots:e._u([{key:"default",fn:function(a){return[r("simple-input",{attrs:{schema:e.additionalProperties,type:e.additionalProperties.type,validationOb:a,"reference-model":""},model:{value:e.newValue,callback:function(a){e.newValue=a},expression:"newValue"}})]}}],null,!0)})],e._v(" "),r("button",{staticClass:"button ac-button is-small is-square is-outlined-gray is-transparent",class:{"is-small":!e.isMedium},on:{click:function(a){return a.preventDefault(),e.addProp()}}},[r("i",{staticClass:"fa fa-plus"})])],2)]:e._e(),e._v(" "),"yaml"===e.activeTab?r("yaml-form",{attrs:{"reference-model":e.referenceModel||{}},on:{"code::model-data-updated":e.updateKeyValueArray},model:{value:e.modelData,callback:function(a){e.modelData=a},expression:"modelData"}}):"json"===e.activeTab?r("json-form",{attrs:{"reference-model":e.referenceModel||{}},on:{"code::model-data-updated":e.updateKeyValueArray},model:{value:e.modelData,callback:function(a){e.modelData=a},expression:"modelData"}}):e._e()]}}])})},staticRenderFns:[]},void 0,t,void 0,!1,"data-v-28237582",!1,void 0,void 0,void 0);exports.default=i;
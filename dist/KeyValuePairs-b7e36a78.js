import{m as e,v as a,a as t,_ as r,r as i,n}from"./entry-28363734.js";import{t as l}from"./tabs-767baaca.js";import{s}from"./size-6e57477f.js";import"vue";function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}var u=n({render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("validation-observer",{key:e.updatePass,ref:e.schema.title.replace(/ /g,"-")+"-observer",staticClass:"ac-nested-elements key-value-pairs",class:{"stop-line":e.isLastChild},attrs:{tag:"div",vid:e.schema.title.replace(/ /g,"-")+"-observer"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("div",{staticClass:"nested-header mb-5"},[t("h6",{staticClass:"is-flex is-semi-normal"},[t("div",{staticClass:"collaps-icon is-disabled"},[t("i",{staticClass:"fa fa-minus",attrs:{"aria-hidden":"true"}})]),e._v("\n      "+e._s(e.schema.title||"Array Item Description")),e._v(" "),t("component-errors",{attrs:{errors:e.errors.concat(e.calcObserverError(r))}})],1),e._v(" "),t("tabs",{model:{value:e.activeTab,callback:function(a){e.activeTab=a},expression:"activeTab"}})],1),e._v(" "),"form"===e.activeTab?[e._l(e.keyValueArray,(function(a,r){return t("div",{key:r+"-"+e.schema.title+"-form"},[t("key-value-pair-items",{attrs:{"reference-model":e.referencekeyValueArray[r]||{},index:r,schema:e.schema,additionalProperties:e.additionalProperties},on:{"delete-key-value":e.deleteProp},model:{value:e.keyValueArray[r],callback:function(a){e.$set(e.keyValueArray,r,a)},expression:"keyValueArray[index]"}})],1)})),e._v(" "),t("validation-observer",{ref:e.schema.title.replace(/ /g,"-")+"-new",staticClass:"key-value-save",attrs:{vid:e.schema.title.replace(/ /g,"-")+"-new-observer",disabled:!0,tag:"div"}},[t("validation-provider",{attrs:{vid:e.schema.title.replace(/ /g,"-")+"-key-provider",rules:"required",name:e.schema.title.replace(/ /g,"-")+"-key",tag:"div"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("simple-input",{attrs:{schema:{title:"Key",type:"string",ui:{tag:"input",type:"text"}},type:"string",validationOb:a,"reference-model":""},model:{value:e.newKey,callback:function(a){e.newKey=a},expression:"newKey"}})]}}],null,!0)}),e._v(" "),"object"===e.additionalProperties.type?[t("validation-provider",{attrs:{rules:"required",name:e.schema.title.replace(/ /g,"-")+"-value",vid:e.schema.title.replace(/ /g,"-")+"-value-provider",slim:""},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("object-form-wrapper",{attrs:{"is-last-child":!0,isSelfRequired:!0,schema:e.additionalProperties,type:e.additionalProperties.type,errors:r,"reference-model":{}},model:{value:e.newValue,callback:function(a){e.newValue=a},expression:"newValue"}})]}}],null,!0)})]:"key-value-pairs"===e.additionalProperties.type?[t("validation-provider",{attrs:{rules:"required",name:e.schema.title.replace(/ /g,"-")+"-value",vid:e.schema.title.replace(/ /g,"-")+"-value-provider",slim:""},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("key-value-pairs",{attrs:{"is-last-child":!0,schema:e.additionalProperties,type:e.additionalProperties.type,errors:r,"reference-model":{}},model:{value:e.newValue,callback:function(a){e.newValue=a},expression:"newValue"}})]}}],null,!0)})]:"array"===e.additionalProperties.type?[t("validation-provider",{attrs:{rules:"required",name:e.schema.title.replace(/ /g,"-")+"-value",vid:e.schema.title.replace(/ /g,"-")+"-value-provider",slim:""},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("array-input",{attrs:{"is-last-child":!0,schema:e.additionalProperties,type:e.additionalProperties.type,errors:r,"reference-model":[]},model:{value:e.newValue,callback:function(a){e.newValue=a},expression:"newValue"}})]}}],null,!0)})]:[t("validation-provider",{attrs:{rules:"required",name:e.schema.title.replace(/ /g,"-")+"-value",vid:e.schema.title.replace(/ /g,"-")+"-value-provider",slim:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("simple-input",{attrs:{schema:e.additionalProperties,type:e.additionalProperties.type,validationOb:a,"reference-model":""},model:{value:e.newValue,callback:function(a){e.newValue=a},expression:"newValue"}})]}}],null,!0)})],e._v(" "),t("button",{staticClass:"button ac-button is-small is-square is-outlined-gray is-transparent",class:{"is-small":!e.isMedium},on:{click:function(a){return a.preventDefault(),e.addProp()}}},[t("i",{staticClass:"fa fa-plus"})])],2)]:e._e(),e._v(" "),"yaml"===e.activeTab?t("yaml-form",{attrs:{"reference-model":e.referenceModel||{}},on:{"code::model-data-updated":e.updateKeyValueArray},model:{value:e.modelData,callback:function(a){e.modelData=a},expression:"modelData"}}):"json"===e.activeTab?t("json-form",{attrs:{"reference-model":e.referenceModel||{}},on:{"code::model-data-updated":e.updateKeyValueArray},model:{value:e.modelData,callback:function(a){e.modelData=a},expression:"modelData"}}):e._e()]}}])})},staticRenderFns:[]},undefined,{name:"key-value-pairs",props:{schema:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}},errors:{type:Array,default:function(){return[]}},isLastChild:{type:Boolean,default:!1}},components:{KeyValuePairItems:function(){return import("./KeyValuePairItems-64e9785d.js").then((function(e){return e.default}))}},mixins:[e,l,a,s],data:function(){return{newData:null,updatePass:0,keyValueArray:null,referencekeyValueArray:null,newKey:"",newValue:null}},computed:{additionalProperties:function(){return this.schema.additionalProperties||{}}},methods:{initKeyValueArray:function(){var e=this;this.keyValueArray=Object.keys(this.value).map((function(a){return{key:a,value:e.value[a]||null}}))},initReferenceKeyValueArray:function(){var e=this;this.referencekeyValueArray=Object.keys(this.referenceModel).map((function(a){return{key:a,value:e.referenceModel[a]||null}}))},updateKeyValueArray:function(e){this.keyValueArray=Object.keys(e).map((function(a){return{key:a,value:e[a]}}))},reconstructObject:function(e){var a={};return e.forEach((function(e){a=Object.assign({},function(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?o(Object(r),!0).forEach((function(a){t(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}({},a),t({},"".concat(e.key),e.value))})),a},addProp:function(){var e=this;return r(i.mark((function a(){var t;return i.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat(e.schema.title.replace(/ /g,"-"),"-new"),a.next=3,e.$refs[t].validate();case 3:a.sent&&(e.keyValueArray.push({key:e.newKey,value:e.newValue}),e.newKey="",e.newValue=null,e.updatePass+=1);case 5:case"end":return a.stop()}}),a)})))()},deleteProp:function(e){this.$delete(this.keyValueArray,e),this.updatePass+=1}},watch:{keyValueArray:{immediate:!0,deep:!0,handler:function(e,a){null!=a&&(this.modelData=this.reconstructObject(e))}},activeTab:function(){this.initKeyValueArray(),this.initReferenceKeyValueArray()},value:{deep:!0,immediate:!0,handler:function(e,a){JSON.stringify(e)!==JSON.stringify(a)&&this.initKeyValueArray(),this.initReferenceKeyValueArray()}}}},undefined,false,undefined,!1,void 0,void 0,void 0);export{u as default};
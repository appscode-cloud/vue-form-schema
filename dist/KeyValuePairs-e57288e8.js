"use strict";var e=require("./entry-c60ce212.js"),r=require("./tabs-ab5afbfc.js"),t=require("./size-0b1802de.js");function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}require("vue");var i={name:"key-value-pairs",props:{schema:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}},errors:{type:Array,default:function(){return[]}},isLastChild:{type:Boolean,default:!1}},components:{KeyValuePairItems:function(){return Promise.resolve().then((function(){return require("./KeyValuePairItems-74ee9fac.js")})).then((function(e){return e.default}))}},mixins:[e.m,r.t,e.v,t.s],data:function(){return{newData:null,updatePass:0,keyValueArray:null,referencekeyValueArray:null,newKey:"",newValue:null}},computed:{additionalProperties:function(){return this.schema.additionalProperties||{}}},methods:{initKeyValueArray:function(){var e=this;this.keyValueArray=Object.keys(this.value).map((function(r){return{key:r,value:e.value[r]||null}}))},initReferenceKeyValueArray:function(){var e=this;this.referencekeyValueArray=Object.keys(this.referenceModel).map((function(r){return{key:r,value:e.referenceModel[r]||null}}))},updateKeyValueArray:function(e){this.keyValueArray=Object.keys(e).map((function(r){return{key:r,value:e[r]}}))},reconstructObject:function(r){var t={};return r.forEach((function(r){t=Object.assign({},function(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){e.a(r,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}))}return r}({},t),e.a({},"".concat(r.key),r.value))})),t},addProp:function(){var r=this;return e._(e.r.mark((function t(){var a;return e.r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(r.schema.title.replace(/ /g,"-"),"-new"),e.next=3,r.$refs[a].validate();case 3:e.sent&&(r.keyValueArray.push({key:r.newKey,value:r.newValue}),r.newKey="",r.newValue=null,r.updatePass+=1);case 5:case"end":return e.stop()}}),t)})))()},deleteProp:function(e){this.$delete(this.keyValueArray,e),this.updatePass+=1}},watch:{keyValueArray:{immediate:!0,deep:!0,handler:function(e,r){null!=r&&(this.modelData=this.reconstructObject(e))}},activeTab:function(){this.initKeyValueArray(),this.initReferenceKeyValueArray()},value:{deep:!0,immediate:!0,handler:function(e,r){JSON.stringify(e)!==JSON.stringify(r)&&this.initKeyValueArray(),this.initReferenceKeyValueArray()}}}},n=e.n({render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("validation-observer",{key:e.updatePass,ref:e.schema.title.replace(/ /g,"-")+"-observer",staticClass:"ac-nested-elements key-value-pairs",class:{"stop-line":e.isLastChild},attrs:{tag:"div",vid:e.schema.title.replace(/ /g,"-")+"-observer"},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.errors;return[t("div",{staticClass:"nested-header mb-5"},[t("h6",{staticClass:"is-flex is-semi-normal"},[t("div",{staticClass:"collaps-icon is-disabled"},[t("i",{staticClass:"fa fa-minus",attrs:{"aria-hidden":"true"}})]),e._v("\n      "+e._s(e.schema.title||"Array Item Description")),e._v(" "),t("component-errors",{attrs:{errors:e.errors.concat(e.calcObserverError(a))}})],1),e._v(" "),t("tabs",{model:{value:e.activeTab,callback:function(r){e.activeTab=r},expression:"activeTab"}})],1),e._v(" "),"form"===e.activeTab?[e._l(e.keyValueArray,(function(r,a){return t("div",{key:a+"-"+e.schema.title+"-form"},[t("key-value-pair-items",{attrs:{"reference-model":e.referencekeyValueArray[a]||{},index:a,schema:e.schema,additionalProperties:e.additionalProperties},on:{"delete-key-value":e.deleteProp},model:{value:e.keyValueArray[a],callback:function(r){e.$set(e.keyValueArray,a,r)},expression:"keyValueArray[index]"}})],1)})),e._v(" "),t("validation-observer",{ref:e.schema.title.replace(/ /g,"-")+"-new",staticClass:"key-value-save",attrs:{vid:e.schema.title.replace(/ /g,"-")+"-new-observer",disabled:!0,tag:"div"}},[t("validation-provider",{attrs:{vid:e.schema.title.replace(/ /g,"-")+"-key-provider",rules:"required",name:e.schema.title.replace(/ /g,"-")+"-key",tag:"div"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("simple-input",{attrs:{schema:{title:"Key",type:"string",ui:{tag:"input",type:"text"}},type:"string",validationOb:r,"reference-model":""},model:{value:e.newKey,callback:function(r){e.newKey=r},expression:"newKey"}})]}}],null,!0)}),e._v(" "),"object"===e.additionalProperties.type?[t("validation-provider",{attrs:{rules:"required",name:e.schema.title.replace(/ /g,"-")+"-value",vid:e.schema.title.replace(/ /g,"-")+"-value-provider",slim:""},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.errors;return[t("object-form-wrapper",{attrs:{"is-last-child":!0,isSelfRequired:!0,schema:e.additionalProperties,type:e.additionalProperties.type,errors:a,"reference-model":{}},model:{value:e.newValue,callback:function(r){e.newValue=r},expression:"newValue"}})]}}],null,!0)})]:"key-value-pairs"===e.additionalProperties.type?[t("validation-provider",{attrs:{rules:"required",name:e.schema.title.replace(/ /g,"-")+"-value",vid:e.schema.title.replace(/ /g,"-")+"-value-provider",slim:""},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.errors;return[t("key-value-pairs",{attrs:{"is-last-child":!0,schema:e.additionalProperties,type:e.additionalProperties.type,errors:a,"reference-model":{}},model:{value:e.newValue,callback:function(r){e.newValue=r},expression:"newValue"}})]}}],null,!0)})]:"array"===e.additionalProperties.type?[t("validation-provider",{attrs:{rules:"required",name:e.schema.title.replace(/ /g,"-")+"-value",vid:e.schema.title.replace(/ /g,"-")+"-value-provider",slim:""},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.errors;return[t("array-input",{attrs:{"is-last-child":!0,schema:e.additionalProperties,type:e.additionalProperties.type,errors:a,"reference-model":[]},model:{value:e.newValue,callback:function(r){e.newValue=r},expression:"newValue"}})]}}],null,!0)})]:[t("validation-provider",{attrs:{rules:"required",name:e.schema.title.replace(/ /g,"-")+"-value",vid:e.schema.title.replace(/ /g,"-")+"-value-provider",slim:""},scopedSlots:e._u([{key:"default",fn:function(r){return[t("simple-input",{attrs:{schema:e.additionalProperties,type:e.additionalProperties.type,validationOb:r,"reference-model":""},model:{value:e.newValue,callback:function(r){e.newValue=r},expression:"newValue"}})]}}],null,!0)})],e._v(" "),t("button",{staticClass:"button ac-button is-small is-square is-outlined-gray is-transparent",class:{"is-small":!e.isMedium},on:{click:function(r){return r.preventDefault(),e.addProp()}}},[t("i",{staticClass:"fa fa-plus"})])],2)]:e._e(),e._v(" "),"yaml"===e.activeTab?t("yaml-form",{attrs:{"reference-model":e.referenceModel||{}},on:{"code::model-data-updated":e.updateKeyValueArray},model:{value:e.modelData,callback:function(r){e.modelData=r},expression:"modelData"}}):"json"===e.activeTab?t("json-form",{attrs:{"reference-model":e.referenceModel||{}},on:{"code::model-data-updated":e.updateKeyValueArray},model:{value:e.modelData,callback:function(r){e.modelData=r},expression:"modelData"}}):e._e()]}}])})},staticRenderFns:[]},undefined,i,undefined,false,"data-v-28237582",!1,void 0,void 0,void 0);exports.default=n;
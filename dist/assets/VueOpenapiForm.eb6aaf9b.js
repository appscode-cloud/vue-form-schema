import{d as c,a as o,_ as n,b as D,r as u,o as E,c as P,w as a,e as d,f as g,g as S,n as $}from"./index.73bd9567.js";const A=function(e){return e=e.charAt(0).toUpperCase()+e.slice(1),e.replace(/([a-z0-9])([A-Z])/g,"$1 $2")},p=function(e,r){let t=Object.assign({},{title:r},{...e});if(e.type==="object"){let i={};try{e.properties?(Object.keys(e.properties).forEach(l=>{const s=A(l);i=Object.assign({},{...i},{[`${l}`]:{...p(e.properties[l],s)}})}),t=Object.assign({},{...t},{properties:{...i}})):e.additionalProperties&&(t=Object.assign({},{...t},{type:"key-value-pairs"}),t.additionalProperties=Object.assign({},{...e.additionalProperties},{...p(e.additionalProperties,"Value")}))}catch{}}else if(e.type==="array"){let i={};const l="";i=Object.assign({},{...i},{...p(e.items,l)}),t=Object.assign({},{...t},{items:{...i}})}else{let i="";e.type==="number"||e.type==="integer"?i="number":e.type==="boolean"?i="checkbox":i="text",t=Object.assign({},{...t},{ui:{tag:"input",type:i}})}return t};function I(e,r){return p(e,r)}var T=c({components:{VForm:o(()=>n(()=>import("./index.73bd9567.js").then(function(e){return e.D}),["assets/index.73bd9567.js","assets/index.a9ae3d8e.css"]).then(({Form:e})=>e)),VField:o(()=>n(()=>import("./index.73bd9567.js").then(function(e){return e.D}),["assets/index.73bd9567.js","assets/index.a9ae3d8e.css"]).then(({Field:e})=>e)),ComponentErrors:o(()=>n(()=>import("./ComponentErrors.b67b0a26.js"),["assets/ComponentErrors.b67b0a26.js","assets/index.73bd9567.js","assets/index.a9ae3d8e.css"]).then(e=>e.default)),RightWrongSigns:o(()=>n(()=>import("./RightWrongSigns.acb0bb46.js"),["assets/RightWrongSigns.acb0bb46.js","assets/index.73bd9567.js","assets/index.a9ae3d8e.css"]).then(e=>e.default))},props:{isSelfRequired:{type:Boolean,default:!1}},methods:{ruleString(e){let r="";return e&&(r+="required"),r},ruleArray(e){let r={};return e&&(r.required=!0),r},ruleObject(e){let r={};return e&&(r.requiredOb=!0),r},calcFormErrors(e,r){return Object.keys(e).filter(t=>t.startsWith(r)).map(t=>{const i=t.replace(/^(\$\/)/,""),l=r.replace(/^(\$\/)/,""),s=i.replace(l+"/","");return`${s.includes("/")?`${s}: `:""}${e[t]}`})}}});const F=c({components:{ObjectFormWrapper:o(()=>n(()=>import("./ObjectFormWrapper.6bd62ef6.js"),["assets/ObjectFormWrapper.6bd62ef6.js","assets/fold.05d4fc30.js","assets/index.73bd9567.js","assets/index.a9ae3d8e.css","assets/tabs.62b38784.js"]).then(e=>e.default)),ObjectForm:o(()=>n(()=>import("./ObjectForm.5fcdac13.js"),["assets/ObjectForm.5fcdac13.js","assets/fold.05d4fc30.js","assets/index.73bd9567.js","assets/index.a9ae3d8e.css"]).then(e=>e.default)),ArrayInput:o(()=>n(()=>import("./ArrayInput.8781848d.js"),["assets/ArrayInput.8781848d.js","assets/index.73bd9567.js","assets/index.a9ae3d8e.css","assets/tabs.62b38784.js","assets/size.609a1df0.js"]).then(e=>e.default)),KeyValuePairs:o(()=>n(()=>import("./KeyValuePairs.bcc7e6b8.js"),["assets/KeyValuePairs.bcc7e6b8.js","assets/index.73bd9567.js","assets/index.a9ae3d8e.css","assets/tabs.62b38784.js","assets/size.609a1df0.js"]).then(e=>e.default)),SimpleInput:o(()=>n(()=>import("./SimpleInput.20a3692a.js"),["assets/SimpleInput.20a3692a.js","assets/size.609a1df0.js","assets/index.73bd9567.js","assets/index.a9ae3d8e.css"]).then(e=>e.default))},props:{type:{type:String,default:"string"},referenceModel:{type:null,default:()=>({})}},emits:["update:modelValue"],data(){return{modelData:null}},watch:{modelData:{immediate:!0,deep:!0,handler(e,r){r!=null&&(this.cleanObject&&this.clean(e),this.type==="number"||this.type==="integer"?e===""?this.$emit("update:modelValue",null):this.$emit("update:modelValue",+e):this.$emit("update:modelValue",e))}},modelValue:{deep:!0,handler(e,r){JSON.stringify(r)!==JSON.stringify(e)&&this.initModelData()}}},created(){this.initModelData()},methods:{initModelData(){this.modelValue?(this.type==="object"||this.type==="key-value-pairs")&&Object.keys(this.modelValue).length>0?this.modelData=this.modelValue:this.type==="array"&&this.modelValue.length>0?this.modelData=this.modelValue:this.type==="boolean"&&this.modelValue!==null?this.modelData=this.modelValue:this.type==="string"||this.type==="number"||this.type==="integer"?this.modelData=this.modelValue:this.modelData=this.initWithBlank():this.modelData=this.initWithBlank()},initWithBlank(){return this.type==="object"||this.type==="key-value-pairs"?{}:this.type==="array"?[]:this.type==="boolean"?!1:this.type==="number"||this.type==="integer"?null:""},clean(e){this.type==="object"||this.type==="key-value-pairs"?Object.keys(e).forEach(r=>{let t="";typeof e[r]!="string"?t=JSON.stringify(e[r]):t=e[r],(t===void 0||t==="null"||t===""||t==="{}"||t==="[]")&&delete e[r]}):this.type==="array"&&e.map((t,i)=>({item:t,idx:i})).filter(t=>{const i=t.item;let l="";return typeof i!="string"?l=JSON.stringify(i):l=i,l===void 0||l==="null"||l===""||l==="{}"||l==="[]"}).map(t=>t.idx).forEach(t=>e.splice(t,1))}}});const R=c({name:"VueOpenapiForm",components:{AcForm:o(()=>n(()=>import("./Form.e32a87cb.js"),["assets/Form.e32a87cb.js","assets/index.73bd9567.js","assets/index.a9ae3d8e.css"])),FormFooterControl:o(()=>n(()=>import("./FormFooterControl.d118598d.js"),["assets/FormFooterControl.d118598d.js","assets/index.73bd9567.js","assets/index.a9ae3d8e.css"]))},mixins:[F,T],provide(){const e={};return Object.defineProperty(e,"theme",{enumerable:!0,get:()=>this.themeMode}),{providedData:e}},props:{schema:{type:Object,default:()=>({})},modelValue:{type:Object,default:()=>({})},formTitle:{type:String,default:""},onlyJson:{type:Boolean,default:!1},size:{type:String,default:"small"},themeMode:{type:String,default:"light"}},computed:{extendedSchema(){return I(this.schema,this.formTitle)}}});function L(e,r,t,i,l,s){const _=u("object-form-wrapper"),v=u("v-field"),h=u("form-footer-control"),b=u("ac-form"),V=u("v-form");return E(),P(V,{ref:"v-form",as:""},{default:a(({meta:y,validate:O,errors:m})=>[d(b,null,{"form-left-controls":a(()=>[d(h,null,{default:a(()=>[g(e.$slots,"left-controls",{validate:O,formStatus:y,errors:m})]),_:2},1024)]),"form-right-controls":a(()=>[d(h,null,{default:a(()=>[g(e.$slots,"right-controls",{validate:O,formStatus:y,errors:m})]),_:2},1024)]),default:a(()=>[S("div",{class:$(["vue-openapi-form",{"is-medium":e.size==="medium"}])},[d(v,{modelValue:e.modelData,"onUpdate:modelValue":r[0]||(r[0]=f=>e.modelData=f),name:e.extendedSchema.title,label:e.extendedSchema.title,rules:e.ruleObject(!0),as:""},{default:a(({field:f,handleChange:j})=>[d(_,{"field-name":"$","model-value":f.value,"expand-form":!0,"is-root":!0,level:1,"is-self-required":!0,"only-json":e.onlyJson,schema:e.extendedSchema,"reference-model":e.referenceModel||{},errors:m,"onUpdate:modelValue":j},null,8,["model-value","only-json","schema","reference-model","errors","onUpdate:modelValue"])]),_:2},1032,["modelValue","name","label","rules"])],2)]),_:2},1024)]),_:3},512)}var k=D(R,[["render",L]]),B=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"}));export{B as V,F as m,T as v};

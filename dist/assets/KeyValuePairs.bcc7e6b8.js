import{b as D,d as O,a as N,_ as T,r,o,h as V,g as d,i as q,t as B,e as t,F as w,p as M,w as u,j as b,c as m,n as S,k as L}from"./index.73bd9567.js";import{m as R,v as E}from"./VueOpenapiForm.eb6aaf9b.js";import{t as F}from"./tabs.62b38784.js";import{s as I}from"./size.609a1df0.js";const z=O({name:"KeyValuePairs",components:{KeyValuePairItems:N(()=>T(()=>import("./KeyValuePairItems.a0d405ae.js"),["assets/KeyValuePairItems.a0d405ae.js","assets/VueOpenapiForm.eb6aaf9b.js","assets/VueOpenapiForm.b2b9afd1.css","assets/index.73bd9567.js","assets/index.a9ae3d8e.css"]).then(e=>e.default))},mixins:[R,F,E,I],props:{schema:{type:Object,default:()=>({})},fieldName:{type:String,default:""},modelValue:{type:Object,default:()=>({})},errors:{type:Object,default:()=>({})},isLastChild:{type:Boolean,default:!1}},data(){return{newData:null,updatePass:0,keyValueArray:null,referencekeyValueArray:null,newKey:"",newValue:null}},computed:{additionalProperties(){return this.schema.additionalProperties||{}}},watch:{keyValueArray:{immediate:!0,deep:!0,handler(e,a){a!=null&&(this.modelData=this.reconstructObject(e))}},activeTab(){this.initKeyValueArray(),this.initReferenceKeyValueArray()},modelValue:{deep:!0,immediate:!0,handler(e,a){const p=JSON.stringify(e),c=JSON.stringify(a);p!==c&&this.initKeyValueArray(),this.initReferenceKeyValueArray()}}},methods:{initKeyValueArray(){this.keyValueArray=Object.keys(this.modelValue).map(e=>({key:e,value:this.modelValue[e]||null}))},initReferenceKeyValueArray(){this.referencekeyValueArray=Object.keys(this.referenceModel).map(e=>({key:e,value:this.referenceModel[e]||null}))},updateKeyValueArray(e){this.keyValueArray=Object.keys(e).map(a=>({key:a,value:e[a]}))},reconstructObject(e){let a={};return e.forEach(p=>{a=Object.assign({},{...a},{[`${p.key}`]:p.value})}),a},async addProp(e){const{valid:a}=await e();a&&(this.keyValueArray.push({key:this.newKey,value:this.newValue}),this.newKey="",this.newValue=null,this.updatePass+=1)},deleteProp(e){this.keyValueArray.splice(e,1),this.updatePass+=1}}}),J={class:"nested-header mb-5"},G={class:"is-flex is-semi-normal"},H=d("div",{class:"collaps-icon is-disabled"},[d("i",{"aria-hidden":"true",class:"fa fa-minus"})],-1),Q=["onClick"],W=d("span",{class:"icon"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])],-1),X=[W];function Y(e,a,p,c,Z,_){const k=r("component-errors"),P=r("tabs"),A=r("key-value-pair-items"),h=r("simple-input"),y=r("v-field"),U=r("object-form-wrapper"),g=r("key-value-pairs",!0),K=r("array-input"),j=r("v-form"),$=r("yaml-form"),C=r("json-form");return o(),V("div",{key:e.updatePass,as:"div",class:S(["ac-nested-elements key-value-pairs is-flex is-flex-direction-column gap-16",{"stop-line":e.isLastChild}])},[d("div",J,[d("h6",G,[H,q(" "+B(e.schema.title||"Array Item Description"),1),t(k,{errors:e.calcFormErrors(e.errors,e.fieldName)},null,8,["errors"])]),t(P,{modelValue:e.activeTab,"onUpdate:modelValue":a[0]||(a[0]=s=>e.activeTab=s)},null,8,["modelValue"])]),e.activeTab==="form"?(o(),V(w,{key:0},[(o(!0),V(w,null,M(e.keyValueArray,(s,n)=>(o(),V("div",{key:`${n}-${e.schema.title}-form`},[t(A,{modelValue:e.keyValueArray[n],"onUpdate:modelValue":l=>e.keyValueArray[n]=l,"field-name":e.fieldName,"reference-model":e.referencekeyValueArray[n]||{},index:n,schema:e.schema,"additional-properties":e.additionalProperties,errors:e.errors,onDeleteKeyValue:e.deleteProp},null,8,["modelValue","onUpdate:modelValue","field-name","reference-model","index","schema","additional-properties","errors","onDeleteKeyValue"])]))),128)),t(j,{id:`${e.schema.title.replace(/ /g,"-")}-new-observer`,as:"div",class:"key-value-save"},{default:u(({validate:s,errors:n})=>[t(y,{id:`${e.schema.title.replace(/ /g,"-")}-key-provider`,modelValue:e.newKey,"onUpdate:modelValue":a[1]||(a[1]=l=>e.newKey=l),rules:"required",name:"newKey",label:`${e.schema.title} new key`,as:"div"},{default:u(({field:l,handleChange:i,errors:f,meta:v})=>[t(h,{"model-value":l.value,schema:{title:"Key",type:"string",ui:{tag:"input",type:"text"}},type:"string","validation-ob":{errors:f,...v},"reference-model":"","onUpdate:modelValue":i},null,8,["model-value","validation-ob","onUpdate:modelValue"])]),_:1},8,["id","modelValue","label"]),e.additionalProperties.type==="object"?(o(),m(y,{key:0,id:`${e.schema.title.replace(/ /g,"-")}-value-provider`,modelValue:e.newValue,"onUpdate:modelValue":a[2]||(a[2]=l=>e.newValue=l),rules:"required",name:"newValue",label:`${e.schema.title} new value`,as:""},{default:u(({field:l,handleChange:i})=>[t(U,{"field-name":"newValue","model-value":l.value,"is-last-child":!0,"is-self-required":!0,schema:e.additionalProperties,type:e.additionalProperties.type,errors:n,"reference-model":{},"onUpdate:modelValue":i},null,8,["model-value","schema","type","errors","onUpdate:modelValue"])]),_:2},1032,["id","modelValue","label"])):e.additionalProperties.type==="key-value-pairs"?(o(),m(y,{key:1,id:`${e.schema.title.replace(/ /g,"-")}-value-provider`,modelValue:e.newValue,"onUpdate:modelValue":a[3]||(a[3]=l=>e.newValue=l),rules:"required",name:"newValue",label:`${e.schema.title} new value`,as:""},{default:u(({field:l,handleChange:i})=>[t(g,{"field-name":"newValue","model-value":l.value,"is-last-child":!0,schema:e.additionalProperties,type:e.additionalProperties.type,errors:n,"reference-model":{},"onUpdate:modelValue":i},null,8,["model-value","schema","type","errors","onUpdate:modelValue"])]),_:2},1032,["id","modelValue","label"])):e.additionalProperties.type==="array"?(o(),m(y,{key:2,id:`${e.schema.title.replace(/ /g,"-")}-value-provider`,modelValue:e.newValue,"onUpdate:modelValue":a[4]||(a[4]=l=>e.newValue=l),rules:"required",name:"newValue",label:`${e.schema.title} new value`,as:""},{default:u(({field:l,handleChange:i})=>[t(K,{"field-name":"newValue","model-value":l.value,"is-last-child":!0,schema:e.additionalProperties,type:e.additionalProperties.type,errors:n,"reference-model":[],"onUpdate:modelValue":i},null,8,["model-value","schema","type","errors","onUpdate:modelValue"])]),_:2},1032,["id","modelValue","label"])):(o(),m(y,{key:3,id:`${e.schema.title.replace(/ /g,"-")}-value-provider`,modelValue:e.newValue,"onUpdate:modelValue":a[5]||(a[5]=l=>e.newValue=l),rules:"required",name:"newValue",label:`${e.schema.title} new value`,as:""},{default:u(({field:l,handleChange:i,errors:f,meta:v})=>[t(h,{"model-value":l.value,schema:e.additionalProperties,type:e.additionalProperties.type,"validation-ob":{errors:f,...v},"reference-model":"","onUpdate:modelValue":i},null,8,["model-value","schema","type","validation-ob","onUpdate:modelValue"])]),_:1},8,["id","modelValue","label"])),d("button",{class:"button ac-button is-medium is-primary is-outlined",onClick:L(l=>e.addProp(s),["prevent"])},X,8,Q)]),_:1},8,["id"])],64)):b("",!0),e.activeTab==="yaml"?(o(),m($,{key:1,modelValue:e.modelData,"onUpdate:modelValue":a[6]||(a[6]=s=>e.modelData=s),"reference-model":e.referenceModel||{},"onCode::modelDataUpdated":e.updateKeyValueArray},null,8,["modelValue","reference-model","onCode::modelDataUpdated"])):e.activeTab==="json"?(o(),m(C,{key:2,modelValue:e.modelData,"onUpdate:modelValue":a[7]||(a[7]=s=>e.modelData=s),"reference-model":e.referenceModel||{},"onCode::modelDataUpdated":e.updateKeyValueArray},null,8,["modelValue","reference-model","onCode::modelDataUpdated"])):b("",!0)],2)}var re=D(z,[["render",Y]]);export{re as default};
